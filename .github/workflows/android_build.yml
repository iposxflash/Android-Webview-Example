name: Dynamic WebAPK Generator
# ... (Blok input tetap sama) ...

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    # ... (Langkah Checkout dan Setup JDK) ...
        
    - name: Update Configs (Package Name, URL, dan App Name)
      run: |
        # ðŸŽ¯ PERBAIKAN: Menggunakan tanda kutip tunggal ('') untuk variabel Bash agar aman
        URL_INPUT='${{ github.event.inputs.URL }}'
        
        # 1. Update Package Name (Ini sudah berhasil, pertahankan)
        sed -i "s/applicationId \".*\"/applicationId \"${{ github.event.inputs.PACKAGE_NAME }}\"/g" app/build.gradle
        
        # 2. Update App Name (Ini sudah berhasil, pertahankan)
        sed -i "s|<string name=\"app_name\">.*</string>|<string name=\"app_name\">${{ github.event.inputs.APP_NAME }}</string>|g" app/src/main/res/values/strings.xml
        
        # 3. Update URL (Menggunakan delimiter @ dan variabel shell $URL_INPUT)
        # PENTING: $URL_INPUT diapit TANDA KUTIP GANDA di dalam sed
        sed -i "s@<string name=\"web_url\">.*</string>@<string name=\"web_url\">\"$URL_INPUT\"</string>@g" app/src/main/res/values/strings.xml
        
    # ... (Langkah Signing Properties) ...
        
    - name: Remove Existing Icons
      run: |
        rm -f app/src/main/res/mipmap-xxhdpi/*

    - name: Download Icon from URL and Save
      run: |
        # ðŸŽ¯ PERBAIKAN: Gunakan tanda kutip tunggal untuk variabel Bash ICON_URL_INPUT
        ICON_URL_INPUT='${{ github.event.inputs.ICON_URL }}' 
        ICON_DIR="app/src/main/res/mipmap-xxhdpi/"
        mkdir -p $ICON_DIR
        
        echo "Downloading icon from: $ICON_URL_INPUT"
        
        # Curl harus menggunakan variabel yang diapit tanda kutip ganda untuk menangani karakter khusus
        curl -f -L "$ICON_URL_INPUT" -o $ICON_DIR/ic_launcher.png
        
        if [ ! -s $ICON_DIR/ic_launcher.png ]; then
            echo "ERROR: File icon tidak diunduh atau ukurannya 0 byte. Ikon masih default."
            exit 1
        fi
        
    # ... (Langkah Keystore dan Build selanjutnya tetap sama) ...
