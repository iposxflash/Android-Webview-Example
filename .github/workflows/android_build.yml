name: Dynamic WebAPK Generator

on:
# ... (Input dan Job setup tetap sama) ...

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    # ... (Langkah Checkout sampai Decode Base64 Icon tetap sama) ...
        
    # Keystore dibuat di ROOT (release-key.jks)
    - name: Generate Dynamic Keystore
      run: |
        keytool -genkey -v -keystore release-key.jks \
        -alias ${{ github.event.inputs.KEY_ALIAS }} \
        -keyalg RSA -keysize 2048 -validity 10000 \
        -storepass ${{ github.event.inputs.STORE_PASS }} \
        -keypass ${{ github.event.inputs.KEY_PASS }} \
        -dname "CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, S=Unknown, C=Unknown"
      
    # ðŸŽ¯ PERBAIKAN AKHIR: Beri izin akses penuh pada file Keystore
    - name: Change Keystore Permissions
      run: chmod 777 release-key.jks
      
    - name: Clean and Build APK and AAB (Release Signed)
      run: ./gradlew clean assembleRelease bundleRelease --no-daemon 
      
    # ... (Langkah Upload Artifact tetap sama) ...
